<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Ts8zs - 提升8智商 的技术存放处</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.3.3/pixi.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QZKG5VG2NM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QZKG5VG2NM');
</script>
<body>
    <div style="position: fixed;bottom: 0;user-select: none;"><a href="http://beian.miit.gov.cn">黑ICP备16001198号-1</a></div>
</body>
<script>
    console.log(atob('ICBfX19fXyAgICAgX19fXyAgICAgICBfX18gICAgICAgX19fX18gICAgX19fXyAgICAgICAgICAgIF9fX18gICAgIFUgIF9fXyB1ICAgX18gIF9fICAgDQogfF8gIiBffCAgIC8gX18ifCB1ICBVKCAiICkgdSAgIHwiXyAgL3UgIC8gX18ifCB1ICAgICAgVSAvIl9fX3wgICAgIFwvIl8gXC8gVXwnIFwvICd8dSANCiAgIHwgfCAgICA8XF9fXyBcLyAgIFwvICAgXC8gICAgVSAvIC8vICA8XF9fXyBcLyAgICAgICBcfCB8IHUgICAgICAgfCB8IHwgfCBcfCB8XC98IHwvIA0KICAvfCB8XCAgICB1X19fKSB8ICAgfCAoICkgfCAgICBcLyAvXyAgICB1X19fKSB8ICAgICAgICB8IHwvX18gIC4tLF98IHxffCB8ICB8IHwgIHwgfCAgDQogdSB8X3xVICAgIHxfX19fLz4+ICAgXF9fXy8+PiAgIC9fX19ffCAgIHxfX19fLz4+ICAgXyAgICBcX19fX3wgIFxfKS1cX19fLyAgIHxffCAgfF98ICANCiBfLy8gXFxfICAgICkoICAoX18pICAgKSggKF9fKSAgXy8vPDwsLSAgICkoICAoX18pICgiKSAgXy8vIFxcICAgICAgICBcXCAgICA8PCwtLCwtLiAgIA0KKF9fKSAoX18pICAoX18pICAgICAgIChfXykgICAgIChfXykgKF8vICAoX18pICAgICAgICIgIChfXykoX18pICAgICAgKF9fKSAgICAoLi8gIFwuKSAg'));
    //copilot with github copilot
    let app = new PIXI.Application({
        width: window.innerWidth,
        height: window.innerHeight,
    });
    document.body.appendChild(app.view);

    let lost = '提升';
    let style = new PIXI.TextStyle({});
    let target = new PIXI.Text(`${lost}\n8\n智商`, style);
    target.anchor.set(0.5);
    app.stage.addChild(target);

    let vx = 1;
    let vy = 1;
    let hue = 0;
    let score = 8;
    let die = 0;

    //用矩形填充背景
    let background = new PIXI.Graphics();

    background.beginFill(0x000000);
    background.drawRect(0, 0, app.screen.width, app.screen.height);
    background.endFill();
    app.stage.addChildAt(background, 0);

    app.ticker.add(() => {
        target.x += vx;
        target.y += vy;
        //文字边缘碰到画布边缘时反弹
        if (target.x > app.screen.width - target.width / 2) {
            vx = -vx;
            target.x = app.screen.width - target.width / 2;
        } else if (target.x < target.width / 2) {
            vx = -vx;
            target.x = target.width / 2;
        }
        if (target.y > app.screen.height - target.height / 2) {
            vy = -vy;
            target.y = app.screen.height - target.height / 2;
        } else if (target.y < target.height / 2) {
            vy = -vy;
            target.y = target.height / 2;
        }
        hue += 1;
        //hue超出范围时重置
        if (hue > 360) {
            hue = 0;
        }
        target.style = new PIXI.TextStyle({
            fontFamily: "Arial",
            fontSize: 36,
            fill: `hsl(${hue}, 100%, 50%)`,
            wordWrap: true,
            wordWrapWidth: 440,
            align: "center",
        });

    });
    let highscore=8;
    target.interactive = true;
    target.on('pointerdown', () => {
        score += 1;
        target.text = `${lost}\n${score}\n智商`;
        if (score>highscore){
            highscore=score;
            document.title = `Ts${highscore}zs - 提升${highscore}智商`;
        }

        vx = Math.random() > 0.5 ? Math.abs(vx) : -Math.abs(vx);
        vy = Math.random() > 0.5 ? Math.abs(vy) : -Math.abs(vy);
        vx *= 1.01;
        vy *= 1.01;
    });

    //点击到屏幕空白位置时分数归8速度还原 点击文字位置时则不会
    app.stage.interactive = true;
    app.stage.on('pointerdown', (e) => {
        if (e.target == app.stage && die<10) {
            score = 8;
            vx = 1;
            vy = 1;
            //还原背景颜色为黑色
            background.beginFill(0x000000);
            background.drawRect(0, 0, app.screen.width, app.screen.height);
            background.endFill();
            die+=1;
            if(die==10){
                lost='降低'
            }
            target.text = `${lost}\n${score}\n智商`;
        }
    });


    //当窗口大小改变时重新设置画布大小
    window.onresize = () => {
        app.renderer.resize(window.innerWidth, window.innerHeight);
        target.x = app.screen.width / 2;
        target.y = app.screen.height / 2;
        //重新修改背景大小
        background.drawRect(0, 0, app.screen.width, app.screen.height);
        background.endFill();
    };
    //每秒score减1 最低减到8
    // setInterval(() => {
    //     if (score > 8) {
    //         score -= 1;
    //     }
    //     if (score < 8) {
    //         score += 1;
    //     }
    //     target.text = `提升\n${score}\n智商`;
    // }, 1000);
</script>
</html>
